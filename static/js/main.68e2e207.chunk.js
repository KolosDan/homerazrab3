(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{93:function(e,t,o){e.exports=o(94)},94:function(e,t,o){"use strict";o.r(t);var a=o(23),n=o(24),r=o(25),i=o(27),s=o(26),c=o(28),l=o(6),m=o(0),p=o.n(m),d=o(18),h=o.n(d),u=o(2),g=(o(109),o(51)),f=o.n(g),k=o(52),E=o.n(k),j=o(53),y=o.n(j),b=o(54),_=o.n(b),v=o(19),C={},S=[],x={},O={};function w(e){for(var t=e.length-1;t>0;t--){var o=Math.floor(Math.random()*(t+1)),a=[e[o],e[t]];e[t]=a[0],e[o]=a[1]}return e}var q=f.a.create({headers:{"Access-Control-Allow-Origin":"*","X-Requested-With":"XMLHttpRequest"}});v.send("VKWebAppInit",{});var z=function(e){function t(e){var o;return Object(n.a)(this,t),(o=Object(i.a)(this,Object(s.a)(t).call(this,e))).state={ready:!1,activeStory:"feed",access_token:"",register:!0,loader:!0,pref:[],users:[],notifications:[],popout:null,current_notification:{interests:[]},notification_count:0,questions_value:["",""],user_photos:[],avatar_links:["https://d2trtkcohkrm90.cloudfront.net/images/emoji/apple/ios-12/128/green-apple.png","https://d2trtkcohkrm90.cloudfront.net/images/emoji/apple/ios-12/128/red-apple.png","https://d2trtkcohkrm90.cloudfront.net/images/emoji/apple/ios-12/128/pear.png","https://d2trtkcohkrm90.cloudfront.net/images/emoji/apple/ios-12/128/tangerine.png","https://d2trtkcohkrm90.cloudfront.net/images/emoji/apple/ios-12/128/lemon.png","https://d2trtkcohkrm90.cloudfront.net/images/emoji/apple/ios-12/128/banana.png","https://d2trtkcohkrm90.cloudfront.net/images/emoji/apple/ios-12/128/watermelon.png","https://d2trtkcohkrm90.cloudfront.net/images/emoji/apple/ios-12/128/grapes.png","https://d2trtkcohkrm90.cloudfront.net/images/emoji/apple/ios-12/128/strawberry.png","https://d2trtkcohkrm90.cloudfront.net/images/emoji/apple/ios-12/128/melon.png","https://d2trtkcohkrm90.cloudfront.net/images/emoji/apple/ios-12/128/cherries.png","https://d2trtkcohkrm90.cloudfront.net/images/emoji/apple/ios-12/128/peach.png","https://d2trtkcohkrm90.cloudfront.net/images/emoji/apple/ios-12/128/mango.png","https://d2trtkcohkrm90.cloudfront.net/images/emoji/apple/ios-12/128/pineapple.png","https://d2trtkcohkrm90.cloudfront.net/images/emoji/apple/ios-12/128/coconut.png","https://d2trtkcohkrm90.cloudfront.net/images/emoji/apple/ios-12/128/kiwi-fruit.png","https://d2trtkcohkrm90.cloudfront.net/images/emoji/apple/ios-12/128/tomato.png","https://d2trtkcohkrm90.cloudfront.net/images/emoji/apple/ios-12/128/eggplant.png","https://d2trtkcohkrm90.cloudfront.net/images/emoji/apple/ios-12/128/avocado.png","https://d2trtkcohkrm90.cloudfront.net/images/emoji/apple/ios-12/128/broccoli.png","https://d2trtkcohkrm90.cloudfront.net/images/emoji/apple/ios-12/128/leafy-green.png","https://d2trtkcohkrm90.cloudfront.net/images/emoji/apple/ios-12/128/cucumber.png","https://d2trtkcohkrm90.cloudfront.net/images/emoji/apple/ios-12/128/hot-pepper.png","https://d2trtkcohkrm90.cloudfront.net/images/emoji/apple/ios-12/128/ear-of-corn.png","https://d2trtkcohkrm90.cloudfront.net/images/emoji/apple/ios-12/128/carrot.png","https://d2trtkcohkrm90.cloudfront.net/images/emoji/apple/ios-12/128/potato.png","https://d2trtkcohkrm90.cloudfront.net/images/emoji/apple/ios-12/128/roasted-sweet-potato.png","https://d2trtkcohkrm90.cloudfront.net/images/emoji/apple/ios-12/128/croissant.png","https://d2trtkcohkrm90.cloudfront.net/images/emoji/apple/ios-12/128/bagel.png","https://d2trtkcohkrm90.cloudfront.net/images/emoji/apple/ios-12/128/bread.png","https://d2trtkcohkrm90.cloudfront.net/images/emoji/apple/ios-12/128/baguette-bread.png","https://d2trtkcohkrm90.cloudfront.net/images/emoji/apple/ios-12/128/pretzel.png","https://d2trtkcohkrm90.cloudfront.net/images/emoji/apple/ios-12/128/cheese-wedge.png","https://d2trtkcohkrm90.cloudfront.net/images/emoji/apple/ios-12/128/egg.png","https://d2trtkcohkrm90.cloudfront.net/images/emoji/apple/ios-12/128/cooking.png","https://d2trtkcohkrm90.cloudfront.net/images/emoji/apple/ios-12/128/pancakes.png","https://d2trtkcohkrm90.cloudfront.net/images/emoji/apple/ios-12/128/bacon.png","https://d2trtkcohkrm90.cloudfront.net/images/emoji/apple/ios-12/128/cut-of-meat.png","https://d2trtkcohkrm90.cloudfront.net/images/emoji/apple/ios-12/128/poultry-leg.png","https://d2trtkcohkrm90.cloudfront.net/images/emoji/apple/ios-12/128/meat-on-bone.png","https://d2trtkcohkrm90.cloudfront.net/images/emoji/apple/ios-12/128/bone.png","https://d2trtkcohkrm90.cloudfront.net/images/emoji/apple/ios-12/128/hot-dog.png","https://d2trtkcohkrm90.cloudfront.net/images/emoji/apple/ios-12/128/hamburger.png","https://d2trtkcohkrm90.cloudfront.net/images/emoji/apple/ios-12/128/french-fries.png","https://d2trtkcohkrm90.cloudfront.net/images/emoji/apple/ios-12/128/pizza.png","https://d2trtkcohkrm90.cloudfront.net/images/emoji/apple/ios-12/128/sandwich.png","https://d2trtkcohkrm90.cloudfront.net/images/emoji/apple/ios-12/128/stuffed-flatbread.png","https://d2trtkcohkrm90.cloudfront.net/images/emoji/apple/ios-12/128/taco.png","https://d2trtkcohkrm90.cloudfront.net/images/emoji/apple/ios-12/128/burrito.png","https://d2trtkcohkrm90.cloudfront.net/images/emoji/apple/ios-12/128/green-salad.png","https://d2trtkcohkrm90.cloudfront.net/images/emoji/apple/ios-12/128/shallow-pan-of-food.png","https://d2trtkcohkrm90.cloudfront.net/images/emoji/apple/ios-12/128/canned-food.png","https://d2trtkcohkrm90.cloudfront.net/images/emoji/apple/ios-12/128/spaghetti.png","https://d2trtkcohkrm90.cloudfront.net/images/emoji/apple/ios-12/128/steaming-bowl.png","https://d2trtkcohkrm90.cloudfront.net/images/emoji/apple/ios-12/128/pot-of-food.png","https://d2trtkcohkrm90.cloudfront.net/images/emoji/apple/ios-12/128/curry-rice.png","https://d2trtkcohkrm90.cloudfront.net/images/emoji/apple/ios-12/128/sushi.png","https://d2trtkcohkrm90.cloudfront.net/images/emoji/apple/ios-12/128/bento-box.png","https://d2trtkcohkrm90.cloudfront.net/images/emoji/apple/ios-12/128/dumpling.png","https://d2trtkcohkrm90.cloudfront.net/images/emoji/apple/ios-12/128/fried-shrimp.png","https://d2trtkcohkrm90.cloudfront.net/images/emoji/apple/ios-12/128/rice-ball.png","https://d2trtkcohkrm90.cloudfront.net/images/emoji/apple/ios-12/128/cooked-rice.png","https://d2trtkcohkrm90.cloudfront.net/images/emoji/apple/ios-12/128/rice-cracker.png","https://d2trtkcohkrm90.cloudfront.net/images/emoji/apple/ios-12/128/fish-cake-with-swirl.png","https://d2trtkcohkrm90.cloudfront.net/images/emoji/apple/ios-12/128/fortune-cookie.png","https://d2trtkcohkrm90.cloudfront.net/images/emoji/apple/ios-12/128/moon-cake.png","https://d2trtkcohkrm90.cloudfront.net/images/emoji/apple/ios-12/128/oden.png","https://d2trtkcohkrm90.cloudfront.net/images/emoji/apple/ios-12/128/dango.png","https://d2trtkcohkrm90.cloudfront.net/images/emoji/apple/ios-12/128/shaved-ice.png","https://d2trtkcohkrm90.cloudfront.net/images/emoji/apple/ios-12/128/ice-cream.png","https://d2trtkcohkrm90.cloudfront.net/images/emoji/apple/ios-12/128/soft-ice-cream.png","https://d2trtkcohkrm90.cloudfront.net/images/emoji/apple/ios-12/128/pie.png","https://d2trtkcohkrm90.cloudfront.net/images/emoji/apple/ios-12/128/dog-face.png","https://d2trtkcohkrm90.cloudfront.net/images/emoji/apple/ios-12/128/cat-face.png","https://d2trtkcohkrm90.cloudfront.net/images/emoji/apple/ios-12/128/mouse-face.png","https://d2trtkcohkrm90.cloudfront.net/images/emoji/apple/ios-12/128/hamster-face.png","https://d2trtkcohkrm90.cloudfront.net/images/emoji/apple/ios-12/128/rabbit-face.png","https://d2trtkcohkrm90.cloudfront.net/images/emoji/apple/ios-12/128/fox-face.png","https://d2trtkcohkrm90.cloudfront.net/images/emoji/apple/ios-12/128/bear-face.png","https://d2trtkcohkrm90.cloudfront.net/images/emoji/apple/ios-12/128/panda-face.png","https://d2trtkcohkrm90.cloudfront.net/images/emoji/apple/ios-12/128/koala.png","https://d2trtkcohkrm90.cloudfront.net/images/emoji/apple/ios-12/128/tiger-face.png","https://d2trtkcohkrm90.cloudfront.net/images/emoji/apple/ios-12/128/lion-face.png","https://d2trtkcohkrm90.cloudfront.net/images/emoji/apple/ios-12/128/cow-face.png","https://d2trtkcohkrm90.cloudfront.net/images/emoji/apple/ios-12/128/pig-face.png","https://d2trtkcohkrm90.cloudfront.net/images/emoji/apple/ios-12/128/pig-nose.png","https://d2trtkcohkrm90.cloudfront.net/images/emoji/apple/ios-12/128/frog-face.png","https://d2trtkcohkrm90.cloudfront.net/images/emoji/apple/ios-12/128/monkey-face.png","https://d2trtkcohkrm90.cloudfront.net/images/emoji/apple/ios-12/128/see-no-evil-monkey.png","https://d2trtkcohkrm90.cloudfront.net/images/emoji/apple/ios-12/128/hear-no-evil-monkey.png","https://d2trtkcohkrm90.cloudfront.net/images/emoji/apple/ios-12/128/speak-no-evil-monkey.png","https://d2trtkcohkrm90.cloudfront.net/images/emoji/apple/ios-12/128/monkey.png","https://d2trtkcohkrm90.cloudfront.net/images/emoji/apple/ios-12/128/chicken.png","https://d2trtkcohkrm90.cloudfront.net/images/emoji/apple/ios-12/128/penguin.png","https://d2trtkcohkrm90.cloudfront.net/images/emoji/apple/ios-12/128/bird.png","https://d2trtkcohkrm90.cloudfront.net/images/emoji/apple/ios-12/128/baby-chick.png","https://d2trtkcohkrm90.cloudfront.net/images/emoji/apple/ios-12/128/hatching-chick.png","https://d2trtkcohkrm90.cloudfront.net/images/emoji/apple/ios-12/128/front-facing-baby-chick.png","https://d2trtkcohkrm90.cloudfront.net/images/emoji/apple/ios-12/128/duck.png","https://d2trtkcohkrm90.cloudfront.net/images/emoji/apple/ios-12/128/eagle.png","https://d2trtkcohkrm90.cloudfront.net/images/emoji/apple/ios-12/128/owl.png","https://d2trtkcohkrm90.cloudfront.net/images/emoji/apple/ios-12/128/bat.png","https://d2trtkcohkrm90.cloudfront.net/images/emoji/apple/ios-12/128/wolf-face.png","https://d2trtkcohkrm90.cloudfront.net/images/emoji/apple/ios-12/128/boar.png","https://d2trtkcohkrm90.cloudfront.net/images/emoji/apple/ios-12/128/horse-face.png","https://d2trtkcohkrm90.cloudfront.net/images/emoji/apple/ios-12/128/unicorn-face.png","https://d2trtkcohkrm90.cloudfront.net/images/emoji/apple/ios-12/128/honeybee.png","https://d2trtkcohkrm90.cloudfront.net/images/emoji/apple/ios-12/128/bug.png","https://d2trtkcohkrm90.cloudfront.net/images/emoji/apple/ios-12/128/butterfly.png","https://d2trtkcohkrm90.cloudfront.net/images/emoji/apple/ios-12/128/snail.png","https://d2trtkcohkrm90.cloudfront.net/images/emoji/apple/ios-12/128/lady-beetle.png","https://d2trtkcohkrm90.cloudfront.net/images/emoji/apple/ios-12/128/ant.png","https://d2trtkcohkrm90.cloudfront.net/images/emoji/apple/ios-12/128/mosquito.png","https://d2trtkcohkrm90.cloudfront.net/images/emoji/apple/ios-12/128/cricket-1.png","https://d2trtkcohkrm90.cloudfront.net/images/emoji/apple/ios-12/128/spider.png","https://d2trtkcohkrm90.cloudfront.net/images/emoji/apple/ios-12/128/spider-web.png","https://d2trtkcohkrm90.cloudfront.net/images/emoji/apple/ios-12/128/scorpion.png","https://d2trtkcohkrm90.cloudfront.net/images/emoji/apple/ios-12/128/turtle.png","https://d2trtkcohkrm90.cloudfront.net/images/emoji/apple/ios-12/128/snake.png","https://d2trtkcohkrm90.cloudfront.net/images/emoji/apple/ios-12/128/lizard.png","https://d2trtkcohkrm90.cloudfront.net/images/emoji/apple/ios-12/128/t-rex.png","https://d2trtkcohkrm90.cloudfront.net/images/emoji/apple/ios-12/128/sauropod.png","https://d2trtkcohkrm90.cloudfront.net/images/emoji/apple/ios-12/128/octopus.png","https://d2trtkcohkrm90.cloudfront.net/images/emoji/apple/ios-12/128/squid.png","https://d2trtkcohkrm90.cloudfront.net/images/emoji/apple/ios-12/128/shrimp.png","https://d2trtkcohkrm90.cloudfront.net/images/emoji/apple/ios-12/128/lobster.png","https://d2trtkcohkrm90.cloudfront.net/images/emoji/apple/ios-12/128/crab.png","https://d2trtkcohkrm90.cloudfront.net/images/emoji/apple/ios-12/128/blowfish.png","https://d2trtkcohkrm90.cloudfront.net/images/emoji/apple/ios-12/128/tropical-fish.png","https://d2trtkcohkrm90.cloudfront.net/images/emoji/apple/ios-12/128/fish.png","https://d2trtkcohkrm90.cloudfront.net/images/emoji/apple/ios-12/128/dolphin.png","https://d2trtkcohkrm90.cloudfront.net/images/emoji/apple/ios-12/128/spouting-whale.png","https://d2trtkcohkrm90.cloudfront.net/images/emoji/apple/ios-12/128/whale.png","https://d2trtkcohkrm90.cloudfront.net/images/emoji/apple/ios-12/128/shark.png","https://d2trtkcohkrm90.cloudfront.net/images/emoji/apple/ios-12/128/crocodile.png","https://d2trtkcohkrm90.cloudfront.net/images/emoji/apple/ios-12/128/tiger.png","https://d2trtkcohkrm90.cloudfront.net/images/emoji/apple/ios-12/128/leopard.png","https://d2trtkcohkrm90.cloudfront.net/images/emoji/apple/ios-12/128/zebra.png","https://d2trtkcohkrm90.cloudfront.net/images/emoji/apple/ios-12/128/gorilla.png","https://d2trtkcohkrm90.cloudfront.net/images/emoji/apple/ios-12/128/elephant.png","https://d2trtkcohkrm90.cloudfront.net/images/emoji/apple/ios-12/128/hippopotamus.png","https://d2trtkcohkrm90.cloudfront.net/images/emoji/apple/ios-12/128/rhinoceros.png","https://d2trtkcohkrm90.cloudfront.net/images/emoji/apple/ios-12/128/camel.png","https://d2trtkcohkrm90.cloudfront.net/images/emoji/apple/ios-12/128/two-hump-camel.png"]},o.onStoryChange=o.onStoryChange.bind(Object(l.a)(Object(l.a)(o))),o.handleChange=o.handleChange.bind(Object(l.a)(Object(l.a)(o))),o.handleCheckbox=o.handleCheckbox.bind(Object(l.a)(Object(l.a)(o))),o.update_user_data=o.update_user_data.bind(Object(l.a)(Object(l.a)(o))),o.get_users=o.get_users.bind(Object(l.a)(Object(l.a)(o))),o.start_dialog=o.start_dialog.bind(Object(l.a)(Object(l.a)(o))),o.get_notifications=o.get_notifications.bind(Object(l.a)(Object(l.a)(o))),o.openModal=o.openModal.bind(Object(l.a)(Object(l.a)(o))),o.get_notification_user=o.get_notification_user.bind(Object(l.a)(Object(l.a)(o))),o.resolve_notification=o.resolve_notification.bind(Object(l.a)(Object(l.a)(o))),o.get_photos=o.get_photos.bind(Object(l.a)(Object(l.a)(o))),o}return Object(c.a)(t,e),Object(r.a)(t,[{key:"handleChange",value:function(e){var t=e.currentTarget,o=t.name,n=t.value;console.log(o,n),this.setState(Object(a.a)({},o,n))}},{key:"handleCheckbox",value:function(e){var t=e.currentTarget,o=t.name,a=t.value;console.log(o,a),e.currentTarget.checked?this.state.pref.push(o):this.state.pref.splice(this.state.pref.indexOf(o),1)}},{key:"onStoryChange",value:function(e){this.setState({activeStory:e.currentTarget.dataset.story})}},{key:"start_dialog",value:function(e){q.post("https://kolosyamba.pythonanywhere.com/start_dialog",{from:C.id,to:e}).then(function(e){console.log(e.data.result)}).catch(function(e){console.log(e)})}},{key:"get_users",value:function(){q.post("https://kolosyamba.pythonanywhere.com/browse",{user_id:C.id,filter:"default",value:"hoy"}).then(function(e){O.setState({users:e.data.result},function(){O.setState({loader:!1})}),console.log(e.data.result)}).catch(function(e){console.log(e)}),this.setState({loader:!0})}},{key:"get_notifications",value:function(){q.post("https://kolosyamba.pythonanywhere.com/get_notifications",{user_id:C.id}).then(function(e){O.setState({notifications:e.data.result}),O.setState({notification_count:e.data.result.length})}).catch(function(e){console.log(e)})}},{key:"resolve_notification",value:function(e,t,o){q.post("https://kolosyamba.pythonanywhere.com/resolve_notification",{from:e,to:C.id,type:t,value:o}).then(function(e){console.log(e.data)}).catch(function(e){console.log(e)})}},{key:"update_user_data",value:function(){var e=[];["male-straight","female-straight","male-homo","female-homo","male-bi","female-bi","non-binary"].map(function(t){document.getElementsByName(t)[0].checked?e.push(t):console.log()}),x.age=document.getElementsByName("age")[0].value,x.description=document.getElementsByName("description")[0].value,x.gender=document.getElementsByName("sex")[0].value,x.preferences=e,q.post("https://kolosyamba.pythonanywhere.com/edit_profile",{user_id:C.id,age:document.getElementsByName("age")[0].value,description:document.getElementsByName("description")[0].value,gender:document.getElementsByName("sex")[0].value,preferences:e}).then(function(e){O.setState({loader:!1}),console.log(e.data.result)}).catch(function(e){console.log(e)}),this.setState({loader:!0})}},{key:"get_notification_user",value:function(e){q.post("https://kolosyamba.pythonanywhere.com/get_user",{user_id:e}).then(function(e){"no"===e.data.result?console.log("NO BLYAT"):O.setState({current_notification:e.data.result})}).catch(function(e){console.log(e)})}},{key:"get_photos",value:function(e){v.send("VKWebAppCallAPIMethod",{method:"photos.get",request_id:"photos.get",params:{owner_id:e,album_id:"profile",count:10,v:"5.101",access_token:this.state.access_token}})}},{key:"openModal",value:function(){this.setState({popout:p.a.createElement(u.a,{actions:[{title:"\u041e\u043a",autoclose:!0,mode:"cancel"}],onClose:this.setState({popout:null})},p.a.createElement("h2",null,"\u0423\u0432\u0435\u0434\u043e\u043c\u043b\u0435\u043d\u0438\u0435 \u043e\u0442\u043f\u0440\u0430\u0432\u043b\u0435\u043d\u043e"))})}},{key:"componentDidMount",value:function(){var e=this;w(this.state.avatar_links),setInterval(function(){e.get_notifications()},3e3),v.subscribe(function(t){console.log(t);var o=e;O=e,"VKWebAppGetUserInfoResult"===t.detail.type?(C=t.detail.data,q.post("https://kolosyamba.pythonanywhere.com/get_user",{user_id:C.id}).then(function(e){"no"===e.data.result?(o.setState({register:!0}),o.setState({loader:!1}),o.setState({ready:!0})):(o.get_users(),o.setState({register:!1}),x=e.data.result,o.setState({ready:!0}))}).catch(function(e){console.log(e)})):"VKWebAppAccessTokenReceived"===t.detail.type?(e.state.access_token=t.detail.data.access_token,v.send("VKWebAppCallAPIMethod",{method:"groups.get",request_id:"groups.get",params:{extended:1,user_id:C.id,v:"5.101",fields:"activity",lang:"ru",count:1e3,access_token:e.state.access_token}})):"VKWebAppCallAPIMethodResult"===t.detail.type&&("groups.get"===t.detail.data.request_id?(console.log("GOT GROUPS"),S=t.detail.data.response.items):"photos.get"===t.detail.data.request_id&&(console.log("GOT PHOTOS"),t.detail.data.response.items.map(function(t){e.state.user_photos.push(t.sizes.pop().url)})))}),v.send("VKWebAppGetUserInfo",{}),v.send("VKWebAppGetAuthToken",{app_id:7403106,scope:"groups,friends"})}},{key:"render",value:function(){var e=this;return this.state.loader?p.a.createElement(u.E,{activePanel:"spinner"},p.a.createElement(u.p,{id:"spinner"},p.a.createElement(u.q,null,"Loading..."),p.a.createElement("div",{style:{display:"flex",alignItems:"center",flexDirection:"column"}},p.a.createElement(u.y,{size:"large",style:{marginTop:100}})))):this.state.ready?this.state.register?p.a.createElement(A,null):p.a.createElement(u.g,{activeStory:this.state.activeStory,tabbar:p.a.createElement(u.z,null,p.a.createElement(u.A,{onClick:this.onStoryChange,selected:"discover"===this.state.activeStory,"data-story":"discover",text:"\u041f\u0440\u043e\u0444\u0438\u043b\u044c"},p.a.createElement(E.a,null)),p.a.createElement(u.A,{onClick:this.onStoryChange,selected:"feed"===this.state.activeStory,"data-story":"feed",text:"\u041b\u0435\u043d\u0442\u0430"},p.a.createElement(y.a,null)),p.a.createElement(u.A,{onClick:this.onStoryChange,selected:"messages"===this.state.activeStory,"data-story":"messages",label:this.state.notification_count.toString(),text:"\u0423\u0432\u0435\u0434\u043e\u043c\u043b\u0435\u043d\u0438\u044f"},p.a.createElement(_.a,null)))},p.a.createElement(u.E,{id:"feed",activePanel:"feed"},p.a.createElement(u.p,{id:"feed"},p.a.createElement(u.q,null,"\u041f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u0438"),p.a.createElement(u.k,null,p.a.createElement(u.o,null,O.state.users.map(function(t,o){return p.a.createElement(u.f,null,p.a.createElement(u.d,{before:p.a.createElement(u.b,{size:72,src:e.state.avatar_links[o]}),size:"l",description:t.geo,bottomContent:p.a.createElement("div",{style:{display:"flex"}},p.a.createElement(u.c,{onClick:function(){e.start_dialog(t.user_id),e.openModal()},mode:"outline",size:"m"},"\u041f\u043e\u0437\u043d\u0430\u043a\u043e\u043c\u0438\u0442\u044c\u0441\u044f\ud83d\ude09"))},t.first_name),t.description,p.a.createElement(u.B,{mode:"buttons"},p.a.createElement(u.m,null,t.interests.map(function(e){return p.a.createElement(u.C,{selected:!0}," ",e," ")}))),p.a.createElement(u.x,{wide:!0}))}))))),p.a.createElement(u.E,{id:"discover",activePanel:"discover"},p.a.createElement(u.p,{id:"discover",separator:!1},p.a.createElement(u.u,{right:p.a.createElement(u.s,null)},p.a.createElement(u.t,{before:p.a.createElement(u.b,{size:48,src:C.photo_100}),status:x.geo},C.first_name," ",C.last_name)),p.a.createElement(u.k,null,p.a.createElement(u.h,null,p.a.createElement(u.i,{top:"\u0412\u0430\u0448 \u0432\u043e\u0437\u0440\u0430\u0441\u0442"},p.a.createElement(u.n,{name:"age",onChange:this.handleChange,defaultValue:x.age,type:"text"}))),p.a.createElement(u.h,null,p.a.createElement(u.D,{onChange:this.handleChange,name:"description",defaultValue:x.description,top:"\u041e \u0441\u0435\u0431\u0435"})),p.a.createElement(u.k,{header:p.a.createElement(u.l,{mode:"secondary"},"\u0412\u0430\u0448\u0438 \u0438\u043d\u0442\u0435\u0440\u0435\u0441\u044b")},p.a.createElement(u.B,{mode:"buttons"},p.a.createElement(u.m,null,x.interests.map(function(e){return p.a.createElement(u.C,{selected:!0}," ",e," ")})))),p.a.createElement(u.h,null,p.a.createElement(u.w,{defaultValue:x.gender,name:"sex",onChange:this.handleChange,top:"\u0412\u0430\u0448 \u0433\u0435\u043d\u0434\u0435\u0440",placeholder:""},p.a.createElement("option",{value:"male-straight"},"\u041c\u0443\u0436\u0447\u0438\u043d\u0430 \u041d\u0430\u0442\u0443\u0440\u0430\u043b"),p.a.createElement("option",{value:"female-straight"},"\u0416\u0435\u043d\u0449\u0438\u043d\u0430 \u041d\u0430\u0442\u0443\u0440\u0430\u043b"),p.a.createElement("option",{value:"male-homo"},"\u041c\u0443\u0436\u0447\u0438\u043d\u0430 \u0413\u043e\u043c\u043e\u0441\u0435\u043a\u0441\u0443\u0430\u043b\u0438\u0441\u0442"),p.a.createElement("option",{value:"female-homo"},"\u0416\u0435\u043d\u0449\u0438\u043d\u0430 \u0413\u043e\u043c\u043e\u0441\u0435\u043a\u0441\u0443\u0430\u043b\u0438\u0441\u0442"),p.a.createElement("option",{value:"male-bi"},"\u041c\u0443\u0436\u0447\u0438\u043d\u0430 \u0411\u0438"),p.a.createElement("option",{value:"female-bi"},"\u0416\u0435\u043d\u0449\u0438\u043d\u0430 \u0411\u0438"),p.a.createElement("option",{value:"non-binary"},"\u041d\u0435 \u0431\u0438\u043d\u0430\u0440\u043d\u044b\u0439"))),p.a.createElement(u.k,{header:p.a.createElement(u.l,{mode:"secondary"},"\u0412\u0430\u0448\u0438 \u043f\u0440\u0435\u0434\u043f\u043e\u0447\u0442\u0435\u043d\u0438\u044f")},p.a.createElement(u.h,null,p.a.createElement(u.e,{defaultChecked:-1!==x.preferences.indexOf("male-straight"),onChange:this.handleCheckbox,name:"male-straight"},"\u041c\u0443\u0436\u0447\u0438\u043d\u0430 \u041d\u0430\u0442\u0443\u0440\u0430\u043b"),p.a.createElement(u.e,{defaultChecked:-1!==x.preferences.indexOf("female-straight"),onChange:this.handleCheckbox,name:"female-straight"},"\u0416\u0435\u043d\u0449\u0438\u043d\u0430 \u041d\u0430\u0442\u0443\u0440\u0430\u043b"),p.a.createElement(u.e,{defaultChecked:-1!==x.preferences.indexOf("male-homo"),onChange:this.handleCheckbox,name:"male-homo"},"\u041c\u0443\u0436\u0447\u0438\u043d\u0430 \u0413\u043e\u043c\u043e\u0441\u0435\u043a\u0441\u0443\u0430\u043b\u0438\u0441\u0442"),p.a.createElement(u.e,{defaultChecked:-1!==x.preferences.indexOf("female-homo"),onChange:this.handleCheckbox,name:"female-homo"},"\u0416\u0435\u043d\u0449\u0438\u043d\u0430 \u0413\u043e\u043c\u043e\u0441\u0435\u043a\u0441\u0443\u0430\u043b\u0438\u0441\u0442"),p.a.createElement(u.e,{defaultChecked:-1!==x.preferences.indexOf("male-bi"),onChange:this.handleCheckbox,name:"male-bi"},"\u041c\u0443\u0436\u0447\u0438\u043d\u0430 \u0411\u0438"),p.a.createElement(u.e,{defaultChecked:-1!==x.preferences.indexOf("female-bi"),onChange:this.handleCheckbox,name:"female-bi"},"\u0416\u0435\u043d\u0449\u0438\u043d\u0430 \u0411\u0438"),p.a.createElement(u.e,{defaultChecked:-1!==x.preferences.indexOf("non-binary"),onChange:this.handleCheckbox,name:"non-binary"},"\u041d\u0435 \u0431\u0438\u043d\u0430\u0440\u043d\u044b\u0439"),p.a.createElement(u.c,{mode:"secondary",size:"xl",onClick:function(){e.update_user_data()}},"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c \u0438\u0437\u043c\u0435\u043d\u0435\u043d\u0438\u044f")))))),p.a.createElement(u.E,{id:"messages",activePanel:"messages"},p.a.createElement(u.p,{id:"messages"},p.a.createElement(u.q,null,"\u0423\u0432\u0435\u0434\u043e\u043c\u043b\u0435\u043d\u0438\u044f"),this.state.notifications.map(function(t){return"init"===t.type?p.a.createElement(u.f,null,t.from_name," \u0445\u043e\u0447\u0435\u0442 \u0441 \u0432\u0430\u043c\u0438 \u043f\u043e\u0437\u043d\u0430\u043a\u043e\u043c\u0438\u0442\u044c\u0441\u044f",p.a.createElement(u.f,null,p.a.createElement(u.c,{onClick:function(){w(e.state.avatar_links),e.setState({activeStory:"notify"}),e.get_notification_user(t.from)},mode:"secondary"},"\u041f\u043e\u0434\u0440\u043e\u0431\u043d\u0435\u0435")),p.a.createElement(u.x,{wide:!0})):"photo"===t.type?p.a.createElement(u.f,null,"\u0424\u043e\u0442\u043e ",t.from_name,p.a.createElement(u.c,{onClick:function(){e.get_photos(t.from),e.setState({activeStory:"notify_photo"}),e.get_notification_user(t.from)},mode:"secondary"},"\u041f\u043e\u0434\u0440\u043e\u0431\u043d\u0435\u0435")):"q_set"===t.type?p.a.createElement(u.f,null,"\u0412\u043e\u043f\u0440\u043e\u0441\u044b \u0434\u043b\u044f ",t.from_name,p.a.createElement(u.c,{onClick:function(){e.get_photos(t.from),e.setState({activeStory:"notify_qset"}),e.get_notification_user(t.from)},mode:"secondary"},"\u041f\u043e\u0434\u0440\u043e\u0431\u043d\u0435\u0435")):"q_answer"===t.type?p.a.createElement(u.f,null,"\u0412\u043e\u043f\u0440\u043e\u0441\u044b \u0434\u043b\u044f ",t.from_name,p.a.createElement(u.c,{onClick:function(){e.get_photos(t.from),e.setState({activeStory:"notify_qanswer",questions_value:t.value}),e.get_notification_user(t.from)},mode:"secondary"},"\u041f\u043e\u0434\u0440\u043e\u0431\u043d\u0435\u0435")):p.a.createElement(u.f,null,p.a.createElement(u.c,{onClick:function(){e.setState({activeStory:"notify"}),e.get_notification_user(t.from)},mode:"secondary"},"LEL"))}))),this.state.current_notification!=={}?p.a.createElement(u.E,{id:"notify",activePanel:"notify"},p.a.createElement(u.p,{id:"notify"},p.a.createElement(u.q,{left:p.a.createElement(u.r,{onClick:function(){e.setState({activeStory:"messages"})}})},"\u0423\u0432\u0435\u0434\u043e\u043c\u043b\u0435\u043d\u0438\u0435"),p.a.createElement(u.f,null,p.a.createElement(u.d,{before:p.a.createElement(u.b,{size:72,src:this.state.avatar_links[0]}),size:"l",description:this.state.current_notification.geo},this.state.current_notification.first_name),this.state.current_notification.description,p.a.createElement(u.B,{mode:"buttons"},p.a.createElement(u.m,null,this.state.current_notification.interests.map(function(e){return p.a.createElement(u.C,{selected:!0}," ",e," ")}))),p.a.createElement(u.f,{style:{display:"flex"}},p.a.createElement(u.c,{size:"l",onClick:function(){w(e.state.avatar_links),e.resolve_notification(e.state.current_notification.user_id,"init",!0),e.setState({activeStory:"messages"})},stretched:!0,mode:"commerce"},"\u041f\u0440\u0438\u043d\u044f\u0442\u044c"),p.a.createElement(u.c,{size:"l",onClick:function(){w(e.state.avatar_links),e.resolve_notification(e.state.current_notification.user_id,"init",!1),e.setState({activeStory:"messages"})},stretched:!0,mode:"destructive"},"\u041e\u0442\u043a\u043b\u043e\u043d\u0438\u0442\u044c"))))):p.a.createElement(u.f,null),this.state.current_notification!=={}?p.a.createElement(u.E,{id:"notify_photo",activePanel:"notify_photo"},p.a.createElement(u.p,{id:"notify_photo"},p.a.createElement(u.q,{left:p.a.createElement(u.r,{onClick:function(){e.setState({activeStory:"messages"})}})},"\u0423\u0432\u0435\u0434\u043e\u043c\u043b\u0435\u043d\u0438\u0435"),p.a.createElement(u.f,null,p.a.createElement(u.d,{before:p.a.createElement(u.b,{size:72,src:this.state.avatar_links[0]}),size:"l",description:this.state.current_notification.geo},this.state.current_notification.first_name),p.a.createElement(u.k,{header:p.a.createElement(u.l,{mode:"secondary"},"\u0424\u043e\u0442\u043e")},p.a.createElement(u.j,{slideWidth:"100%",style:{height:400},bullets:"dark"},this.state.user_photos.map(function(e){return p.a.createElement("div",{style:{backgroundSize:"contain",backgroundRepeat:"no-repeat",marginRight:"auto",marginLeft:"auto",display:"block",width:"90%",backgroundImage:"url("+e+")"}})}))),p.a.createElement(u.f,{style:{display:"flex"}},p.a.createElement(u.c,{size:"l",onClick:function(){w(e.state.avatar_links),e.resolve_notification(e.state.current_notification.user_id,"photo",!0),e.setState({activeStory:"messages"})},stretched:!0,mode:"commerce"},"\u041f\u0440\u0438\u043d\u044f\u0442\u044c"),p.a.createElement(u.c,{size:"l",onClick:function(){w(e.state.avatar_links),e.resolve_notification(e.state.current_notification.user_id,"photo",!1),e.setState({activeStory:"messages"})},stretched:!0,mode:"destructive"},"\u041e\u0442\u043a\u043b\u043e\u043d\u0438\u0442\u044c"))))):p.a.createElement(u.f,null),this.state.current_notification!=={}?p.a.createElement(u.E,{id:"notify_qset",activePanel:"notify_qset"},p.a.createElement(u.p,{id:"notify_qset"},p.a.createElement(u.q,{left:p.a.createElement(u.r,{onClick:function(){e.setState({activeStory:"messages"})}})},"\u0412\u043e\u043f\u0440\u043e\u0441\u044b"),p.a.createElement(u.f,null,p.a.createElement(u.k,null,"\u0412\u044b \u043c\u043e\u0436\u0435\u0442\u0435 \u0437\u0430\u0434\u0430\u0442\u044c \u043f\u0430\u0440\u0443 \u0432\u043e\u043f\u0440\u043e\u0441\u043e\u0432 \u0434\u043b\u044f  ",this.state.current_notification.first_name,p.a.createElement(u.h,null,p.a.createElement(u.i,{top:"\u041f\u0435\u0440\u0432\u044b\u0439 \u0432\u043e\u043f\u0440\u043e\u0441"},p.a.createElement(u.n,{name:"q_1",type:"text"})),p.a.createElement(u.i,{top:"\u0412\u0442\u043e\u0440\u043e\u0439 \u0432\u043e\u043f\u0440\u043e\u0441"},p.a.createElement(u.n,{name:"q_2",type:"text"})))),p.a.createElement(u.f,{style:{display:"flex"}},p.a.createElement(u.c,{size:"l",onClick:function(){e.resolve_notification(e.state.current_notification.user_id,"q_set",[document.getElementsByName("q_1")[0].value,document.getElementsByName("q_2")[0].value]),e.setState({activeStory:"messages"})},stretched:!0},"\u041e\u0442\u043f\u0440\u0430\u0432\u0438\u0442\u044c"))))):p.a.createElement(u.f,null),this.state.current_notification!=={}?p.a.createElement(u.E,{id:"notify_qanswer",activePanel:"notify_qanswer"},p.a.createElement(u.p,{id:"notify_qanswer"},p.a.createElement(u.q,{left:p.a.createElement(u.r,{onClick:function(){e.setState({activeStory:"messages"})}})},"\u0412\u043e\u043f\u0440\u043e\u0441\u044b"),p.a.createElement(u.f,null,p.a.createElement(u.k,null,this.state.current_notification.first_name," \u0437\u0430\u0434\u0430\u043b \u0432\u0430\u043c 2 \u0432\u043e\u043f\u0440\u043e\u0441\u0430:",p.a.createElement(u.h,null,p.a.createElement(u.i,{top:this.state.questions_value.value[0]},p.a.createElement(u.n,{name:"qa_1",type:"text"})),p.a.createElement(u.i,{top:this.state.questions_value.value[1]},p.a.createElement(u.n,{name:"qa_2",type:"text"})))),p.a.createElement(u.f,{style:{display:"flex"}},p.a.createElement(u.c,{size:"l",onClick:function(){e.resolve_notification(e.state.current_notification.user_id,"q_answer",[{question:document.getElementsByName("qa_1")[0].value},{question:document.getElementsByName("q_2")[0].value}]),e.setState({activeStory:"messages"})},stretched:!0},"\u041e\u0442\u043f\u0440\u0430\u0432\u0438\u0442\u044c"))))):p.a.createElement(u.f,null)):p.a.createElement("div",null)}}]),t}(p.a.Component),A=function(e){function t(e){var o;return Object(n.a)(this,t),(o=Object(i.a)(this,Object(s.a)(t).call(this,e))).state={activeStory:"discover",sex:"male-straight",pref:[],age:18,description:""},o.handleChange=o.handleChange.bind(Object(l.a)(Object(l.a)(o))),o.onStoryChange=o.onStoryChange.bind(Object(l.a)(Object(l.a)(o))),o.handleCheckbox=o.handleCheckbox.bind(Object(l.a)(Object(l.a)(o))),o.register_user=o.register_user.bind(Object(l.a)(Object(l.a)(o))),o}return Object(c.a)(t,e),Object(r.a)(t,[{key:"handleChange",value:function(e){var t=e.currentTarget,o=t.name,n=t.value;console.log(o,n),this.setState(Object(a.a)({},o,n))}},{key:"handleCheckbox",value:function(e){var t=e.currentTarget,o=t.name;t.value;e.currentTarget.checked?this.state.pref.push(o):this.state.pref.splice(this.state.pref.indexOf(o),1)}},{key:"onStoryChange",value:function(e){this.setState({activeStory:e.currentTarget.dataset.story})}},{key:"register_user",value:function(){O.setState({loader:!0}),q.post("https://kolosyamba.pythonanywhere.com/signup",{user_id:C.id,age:this.state.age,geo:C.city.title,groups:S,description:this.state.description,gender:this.state.sex,preferences:this.state.pref,first_name:C.first_name}).then(function(e){e.data.error?alert(e.data.error):(O.get_users(),q.post("https://kolosyamba.pythonanywhere.com/get_user",{user_id:C.id}).then(function(e){"no"===e.data.result?alert("wtf??"):(x=e.data.result,O.setState({ready:!0}),O.setState({register:!1}),O.setState({loader:!1}),console.log(x))}).catch(function(e){console.log(e)}))}).catch(function(e){console.log(e)})}},{key:"render",value:function(){var e=this;return p.a.createElement(u.v,{activeView:this.state.activeStory},p.a.createElement(u.E,{id:"discover",activePanel:"discover"},p.a.createElement(u.p,{id:"discover",separator:!1},p.a.createElement(u.u,{right:p.a.createElement(u.s,null)},p.a.createElement(u.t,{before:p.a.createElement(u.b,{size:48,src:C.photo_100})},C.first_name," ",C.last_name)),p.a.createElement(u.k,null,p.a.createElement(u.h,null,p.a.createElement(u.i,{top:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u0432\u0430\u0448 \u0432\u043e\u0437\u0440\u0430\u0441\u0442"},p.a.createElement(u.n,{name:"age",onChange:this.handleChange,type:"text",placeholder:"18"}))),p.a.createElement(u.h,null,p.a.createElement(u.D,{onChange:this.handleChange,name:"description",top:"\u041e \u0441\u0435\u0431\u0435"})),p.a.createElement(u.h,null,p.a.createElement(u.w,{name:"sex",onChange:this.handleChange,top:"\u0412\u0430\u0448 \u0433\u0435\u043d\u0434\u0435\u0440"},p.a.createElement("option",{value:"male-straight"},"\u041c\u0443\u0436\u0447\u0438\u043d\u0430 \u041d\u0430\u0442\u0443\u0440\u0430\u043b"),p.a.createElement("option",{value:"female-straight"},"\u0416\u0435\u043d\u0449\u0438\u043d\u0430 \u041d\u0430\u0442\u0443\u0440\u0430\u043b"),p.a.createElement("option",{value:"male-homo"},"\u041c\u0443\u0436\u0447\u0438\u043d\u0430 \u0413\u043e\u043c\u043e\u0441\u0435\u043a\u0441\u0443\u0430\u043b\u0438\u0441\u0442"),p.a.createElement("option",{value:"female-homo"},"\u0416\u0435\u043d\u0449\u0438\u043d\u0430 \u0413\u043e\u043c\u043e\u0441\u0435\u043a\u0441\u0443\u0430\u043b\u0438\u0441\u0442"),p.a.createElement("option",{value:"male-bi"},"\u041c\u0443\u0436\u0447\u0438\u043d\u0430 \u0411\u0438"),p.a.createElement("option",{value:"female-bi"},"\u0416\u0435\u043d\u0449\u0438\u043d\u0430 \u0411\u0438"),p.a.createElement("option",{value:"non-binary"},"\u041d\u0435 \u0431\u0438\u043d\u0430\u0440\u043d\u044b\u0439"))),p.a.createElement(u.k,{header:p.a.createElement(u.l,{mode:"secondary"},"\u0412\u0430\u0448\u0438 \u043f\u0440\u0435\u0434\u043f\u043e\u0447\u0442\u0435\u043d\u0438\u044f")},p.a.createElement(u.h,null,p.a.createElement(u.e,{onChange:this.handleCheckbox,name:"male-straight"},"\u041c\u0443\u0436\u0447\u0438\u043d\u0430 \u041d\u0430\u0442\u0443\u0440\u0430\u043b"),p.a.createElement(u.e,{onChange:this.handleCheckbox,name:"female-straight"},"\u0416\u0435\u043d\u0449\u0438\u043d\u0430 \u041d\u0430\u0442\u0443\u0440\u0430\u043b"),p.a.createElement(u.e,{onChange:this.handleCheckbox,name:"male-homo"},"\u041c\u0443\u0436\u0447\u0438\u043d\u0430 \u0413\u043e\u043c\u043e\u0441\u0435\u043a\u0441\u0443\u0430\u043b\u0438\u0441\u0442"),p.a.createElement(u.e,{onChange:this.handleCheckbox,name:"female-homo"},"\u0416\u0435\u043d\u0449\u0438\u043d\u0430 \u0413\u043e\u043c\u043e\u0441\u0435\u043a\u0441\u0443\u0430\u043b\u0438\u0441\u0442"),p.a.createElement(u.e,{onChange:this.handleCheckbox,name:"male-bi"},"\u041c\u0443\u0436\u0447\u0438\u043d\u0430 \u0411\u0438"),p.a.createElement(u.e,{onChange:this.handleCheckbox,name:"female-bi"},"\u0416\u0435\u043d\u0449\u0438\u043d\u0430 \u0411\u0438"),p.a.createElement(u.e,{onChange:this.handleCheckbox,name:"non-binary"},"\u041d\u0435 \u0431\u0438\u043d\u0430\u0440\u043d\u044b\u0439"),p.a.createElement(u.c,{mode:"secondary",onClick:function(){e.register_user()},size:"xl"},"\u041f\u0440\u043e\u0434\u043e\u043b\u0436\u0438\u0442\u044c")))))))}}]),t}(p.a.Component);h.a.render(p.a.createElement(z,null),document.getElementById("root"))}},[[93,1,2]]]);
//# sourceMappingURL=main.68e2e207.chunk.js.map